!function(n,i){"use strict";var t=null,a=!0,o=!1;function e(){t=new LazyLoad;var i=n("#load-more-container");i.length&&(1===i.data("auto")&&n(window).on("scroll",function(n,i,t){var a,o,e,l=null,r=0;t||(t={});var c=function(){r=!1===t.leading?0:Date.now(),l=null,e=n.apply(a,o),l||(a=o=null)};return function(){var d=Date.now();r||!1!==t.leading||(r=d);var u=i-(d-r);return a=this,o=arguments,u<=0||u>i?(l&&(clearTimeout(l),l=null),r=d,e=n.apply(a,o),l||(a=o=null)):l||!1===t.trailing||(l=setTimeout(c,u)),e}}(function(){!function(){if(a){var i=n("#main-item-container"),t=i.children("li:first-child").outerHeight(),o=0;o=i.hasClass("list-view0")?2*t:6*t,n(window).scrollTop()>=n(document).height()-n(window).height()-o&&l()}}()},250)),n("#btn-load-more").on("click",function(){l()}))}function l(){if(!o){o=!0;var i=n("#load-more-container"),e=n("#main-item-container"),l=i.data("start")?i.data("start"):0;n("#load-more-indicator").show(),n.ajax({url:window.location+"&load_more_start="+l}).done(function(o){var r=n(o).find("#main-item-container > li");r.length?(e.append(r).fadeIn(),e.hasClass("list-view1")?n("#view1").trigger("click"):e.hasClass("list-view2")?n("#view2").trigger("click"):t.update()):(a=!1,i.hide()),i.data("start",l+r.length)}).always(function(){n("#load-more-indicator").hide(),o=!1})}}n(document).ready(function(){e()})}(jQuery);
